<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Manual Build | iohook</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Node.js global native keyboard and mouse listener.">
    
    <link rel="preload" href="/iohook/assets/css/0.styles.e7c4a41e.css" as="style"><link rel="preload" href="/iohook/assets/js/app.89f0a991.js" as="script"><link rel="preload" href="/iohook/assets/js/2.ca108d44.js" as="script"><link rel="preload" href="/iohook/assets/js/10.05f44689.js" as="script"><link rel="prefetch" href="/iohook/assets/js/11.dc3bc57e.js"><link rel="prefetch" href="/iohook/assets/js/12.c04a67b6.js"><link rel="prefetch" href="/iohook/assets/js/3.0de82c9b.js"><link rel="prefetch" href="/iohook/assets/js/4.09fd2c39.js"><link rel="prefetch" href="/iohook/assets/js/5.fc791712.js"><link rel="prefetch" href="/iohook/assets/js/6.ffe6f60a.js"><link rel="prefetch" href="/iohook/assets/js/7.5d353c1b.js"><link rel="prefetch" href="/iohook/assets/js/8.141282d8.js"><link rel="prefetch" href="/iohook/assets/js/9.55a5040f.js">
    <link rel="stylesheet" href="/iohook/assets/css/0.styles.e7c4a41e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/iohook/" class="home-link router-link-active"><!----> <span class="site-name">iohook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/iohook/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://www.npmjs.com/package/iohook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NPM
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/wilix-team/iohook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/iohook/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://www.npmjs.com/package/iohook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NPM
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/wilix-team/iohook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/iohook/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/iohook/os-support.html" class="sidebar-link">OS Support</a></li><li><a href="/iohook/installation.html" class="sidebar-link">Installation</a></li><li><a href="/iohook/usage.html" class="sidebar-link">Usage</a></li><li><a href="/iohook/manual-build.html" aria-current="page" class="active sidebar-link">Manual Build</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iohook/manual-build.html#linux" class="sidebar-link">Linux</a></li><li class="sidebar-sub-header"><a href="/iohook/manual-build.html#macos" class="sidebar-link">macOS</a></li><li class="sidebar-sub-header"><a href="/iohook/manual-build.html#windows" class="sidebar-link">Windows</a></li><li class="sidebar-sub-header"><a href="/iohook/manual-build.html#building-for-specific-versions-of-node" class="sidebar-link">Building for specific versions of node</a></li></ul></li><li><a href="/iohook/faq.html" class="sidebar-link">FAQ</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="manual-build"><a href="#manual-build" class="header-anchor">#</a> Manual Build</h1> <div class="custom-block tip"><p class="custom-block-title">INFO</p> <p>This is not required for regular users. You should follow this page only if you want to build the source files yourself.</p></div> <div class="custom-block tip"><p class="custom-block-title">WARNING</p> <p>When you run <code>npm run build</code>, it will try to download a prebuilt for your platform/target, and sometime fail if you are building for a recent target. You can safely ignore this step and the associated warning.</p></div> <p>You can build own modules directly in your node_modules under the project. Go to ~/my_project/node_modules/iohook path via terminal.
Or you can just clone iohook repository and working on it, then copy binnary files to project's node_modules or change download path in iohook and make you own version of module.</p> <p>Before start, you need install required dependencies for build:</p> <h2 id="linux"><a href="#linux" class="header-anchor">#</a> Linux</h2> <ul><li><code>sudo apt-get install -y libx11-dev libx11-xcb-dev libxkbcommon-dev libxkbcommon-x11-dev</code></li> <li><code>npm run build</code></li></ul> <h2 id="macos"><a href="#macos" class="header-anchor">#</a> macOS</h2> <ul><li><code>npm run build</code></li></ul> <h2 id="windows"><a href="#windows" class="header-anchor">#</a> Windows</h2> <ul><li>Install: msys2 with autotools, pkg-config, libtool, gcc, clang, glib, C++ Build Tools</li> <li><code>npm run build</code></li></ul> <h2 id="building-for-specific-versions-of-node"><a href="#building-for-specific-versions-of-node" class="header-anchor">#</a> Building for specific versions of node</h2> <p>Running <code>npm run build</code> will detect your platform and dump a build into <code>./builds</code>. You can also use <code>build.js</code> which features the following
command line options:</p> <ul><li><code>--runtime</code> specifies whether to build for Electron or plain node</li> <li><code>--version</code> specifies what version of Electron/node to build for</li> <li><code>--abi</code> specifies what <a href="https://nodejs.org/en/docs/guides/abi-stability/" target="_blank" rel="noopener noreferrer">ABI version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> of Electron/node to build against</li></ul> <p>For example, to build for Electron v4.0.4, you would run:</p> <div class="language- extra-class"><pre class="language-text"><code>node build.js --runtime electron --version 4.0.4 --abi 69
</code></pre></div><p>To see more examples of what values to use, view iohook's <a href="https://github.com/wilix-team/iohook/blob/master/package.json" target="_blank" rel="noopener noreferrer">package.json file<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, under <code>supportedTargets</code>. The three values in each block are runtime, version and abi respectively.</p> <p><code>--runtime</code>, <code>--version</code> and <code>--abi</code> must all be supplied to build for a specific node version. If they are not supplied, <code>build.js</code> will build for the versions specified under <code>supportedTargets</code> in your <code>package.json</code> (again, see iohook's <a href="https://github.com/wilix-team/iohook/blob/master/package.json" target="_blank" rel="noopener noreferrer">package.json file<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for details).</p> <ul><li><p><code>--no-upload</code> tells the script not to attempt to upload the built files to GitHub afterwards</p></li> <li><p><code>--all</code> tells the script to build all supported targets. Useful for CI.</p></li></ul> <p>Typically <code>build.js</code> is used as part of iohook's CI in order to upload newly-built binaries to NPM. This is thus the default behavior of the script. To prevent this, supply the <code>--no-upload</code> flag:</p> <div class="language- extra-class"><pre class="language-text"><code>node build.js --no-upload
</code></pre></div><h1 id="testing"><a href="#testing" class="header-anchor">#</a> Testing</h1> <p>iohook uses Jest for automated testing. To execute tests, run <code>npm run test</code> in your console.</p> <p>::: WARNING
It is important you don't press any buttons on your keyboard, don't use your mouse nor the scroll wheel. Tests depend on native events fired by the real keyboard and mouse. Interrupting them will cause tests to fail.
:::</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/wilix-team/iohook/edit/master/docs/manual-build.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/iohook/usage.html" class="prev">
        Usage
      </a></span> <span class="next"><a href="/iohook/faq.html">
        FAQ
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/iohook/assets/js/app.89f0a991.js" defer></script><script src="/iohook/assets/js/2.ca108d44.js" defer></script><script src="/iohook/assets/js/10.05f44689.js" defer></script>
  </body>
</html>
